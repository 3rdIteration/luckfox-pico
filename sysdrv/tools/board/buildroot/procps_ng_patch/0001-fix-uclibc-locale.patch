--- a/library/sysinfo.c
+++ b/library/sysinfo.c
@@ -88,12 +88,16 @@
     return 0;
 }
 
 PROCPS_EXPORT int procps_loadavg(
     double *restrict av1,
     double *restrict av5,
     double *restrict av15) {
     FILE *fp;
     char *savelocale;
 
+#if defined(__GLIBC__)
     locale_t tmplocale;
+#endif
 
     if (!(savelocale = setlocale(LC_NUMERIC, NULL)))
         return -errno;
@@ -101,12 +105,16 @@
         return -errno;
 
+#if defined(__GLIBC__)
     tmplocale = newlocale(LC_NUMERIC_MASK, "C", (locale_t)0);
     uselocale(tmplocale);
+#endif
 
     if (!(fp = fopen(LOADAVG_FILE, "r")))
         return -errno;
     fscanf(fp, "%f %f %f", &av1, &av5, &av15);
     fclose(fp);
 
+#if defined(__GLIBC__)
     uselocale(LC_GLOBAL_LOCALE);
     freelocale(tmplocale);
+#endif
     setlocale(LC_NUMERIC, savelocale);
 
     return 0;
