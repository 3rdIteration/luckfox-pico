--- a/library/sysinfo.c
+++ b/library/sysinfo.c
@@ -85,7 +85,9 @@
     FILE *fp;
     char *savelocale;
 
+#if defined(__GLIBC__)
     locale_t tmplocale;
+#endif
 
     if (!(savelocale = setlocale(LC_NUMERIC, NULL)))
         return -errno;
@@ -94,6 +96,8 @@
         return -errno;
 
+#if defined(__GLIBC__)
     tmplocale = newlocale(LC_NUMERIC_MASK, "C", (locale_t)0);
     uselocale(tmplocale);
+#endif
 
     if (!(fp = fopen(LOADAVG_FILE, "r")))
@@ -102,8 +106,10 @@
     fscanf(fp, "%f %f %f", &av1, &av5, &av15);
     fclose(fp);
 
+#if defined(__GLIBC__)
     uselocale(LC_GLOBAL_LOCALE);
     freelocale(tmplocale);
+#endif
     setlocale(LC_NUMERIC, savelocale);
 
     return 0;
